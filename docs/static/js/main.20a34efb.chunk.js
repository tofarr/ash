(this.webpackJsonpash=this.webpackJsonpash||[]).push([[0],{200:function(e,t,n){e.exports=n(344)},205:function(e,t,n){},341:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"code",(function(){return ra})),n.d(a,"title",(function(){return ca})),n.d(a,"save",(function(){return oa}));var r=n(0),c=n.n(r),o=n(16),i=n.n(o),u=(n(205),n(20)),l=n(51),s=n(381),m=n(385),f=n(4),d=n(9),p=n.n(d),h="YYYY-MM-DD",b="YYYY-MM";function E(){return p()().format(h)}function _(){return p()().format(b)}function v(e){return e.substring(0,7)}var g,O=new(n(169).a)("ash"),j=n(5);function y(){return Object(j.object)().shape({formatting:Object(j.object)().shape({date_format:Object(j.string)().required(),month_format:Object(j.string)().required()}).required(),congregation_name:Object(j.string)(),city:Object(j.string)(),province_or_state:Object(j.string)(),accounts_servant_or_overseer:Object(j.string)(),authorized_signer:Object(j.string)(),other_account_description:Object(j.string)(),cash_box:Object(j.boolean)().required(),min_num_interest:Object(j.number)().integer().min(0).required(),min_num_expenditure:Object(j.number)().integer().min(0).required(),meeting_days:Object(j.object)().shape({sun:Object(j.boolean)().required(),mon:Object(j.boolean)().required(),tue:Object(j.boolean)().required(),wed:Object(j.boolean)().required(),thu:Object(j.boolean)().required(),fri:Object(j.boolean)().required(),sat:Object(j.boolean)().required()}).required()})}function C(){return O.table("settings")}function x(e){return new Promise((function(t,n){y().validate(e).then((function(){C().put(e,1).then(t,n)}),n)}))}O.version(1).stores({settings:""}),function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(g||(g={}));var w=g,S=[],k=[];function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.Info;k.push({type:t,msg:e,timestamp:new Date}),B()}function W(){k.length=0,B()}function A(e){S.push(e)}function q(e){var t=S.indexOf(e);t>=0?S.splice(t,1):console.error("Attempted to unsubscribe callback which was not subscribed!",e)}function B(){S.forEach((function(e){return e(k)}))}function I(){return new Promise((function(e,t){C().get(1).then((function(t){e(t||{formatting:{date_format:"MMM D YYYY",month_format:"MMM YYYY"},congregation_name:"",city:"",province_or_state:"",accounts_servant_or_overseer:"",authorized_signer:"",other_account_description:"",cash_box:!1,min_num_interest:1,min_num_expenditure:1,meeting_days:{sun:!0,mon:!1,tue:!1,wed:!1,thu:!0,fri:!1,sat:!1}})}),t)}))}function D(e){return p()().format(e.formatting.date_format)}function M(e,t){return p()(t,h).format(e.formatting.date_format)}var R=void 0;function P(){if(!R)throw new Error("Settings not set - SettingsLoader should be a parent of the calling component");return R}function U(e){R=e}var F=n(370),H=n(371),N=function(){return c.a.createElement(m.a,{p:2},c.a.createElement(F.a,{container:!0,justify:"center"},c.a.createElement(F.a,{item:!0},c.a.createElement(H.a,null))))},Y=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),l=Object(f.a)(u,2),s=l[0],m=l[1];return Object(r.useEffect)((function(){i(!0),I().then((function(e){m(e),U(e),i(!1)}),(function(){return i(!1)}))}),[]),o?c.a.createElement(N,null):s?t(s):null},L=n(182),G=n(372),V=Object(L.a)({palette:{primary:{main:"#4a6da7"},secondary:{main:"#FFCC00"},error:{main:"#CC3300"}}}),K=function(e){var t=e.children;return c.a.createElement(G.a,{theme:V},t)},X=n(380),z=n(378),J=n(377),$=n(346),Q=n(388),Z=n(180),ee=n.n(Z),te=n(373),ne=n(31),ae=n(68),re=n(69),ce=n(72),oe=n(70),ie=n(38),ue=n(73),le=function(e){function t(e){var n;return Object(ae.a)(this,t),(n=Object(ce.a)(this,Object(oe.a)(t).call(this,e))).state={msgs:[]},n.setMsgs=n.setMsgs.bind(Object(ie.a)(n)),n}return Object(ue.a)(t,e),Object(re.a)(t,[{key:"setMsgs",value:function(e){this.setState({msgs:e})}},{key:"componentDidMount",value:function(){A(this.setMsgs)}},{key:"componentWillUnmount",value:function(){q(this.setMsgs)}},{key:"render",value:function(){return this.props.children(this.state.msgs,W)}}]),t}(r.Component),se=n(375),me=n(174),fe=n.n(me),de=n(374),pe=n(173),he=n.n(pe),be=n(71),Ee=n.n(be),_e=function(e){var t=e.msg,n=e.color;switch(t.type){case w.Info:return c.a.createElement(he.a,{color:n||"primary"});case w.Warning:case w.Error:return c.a.createElement(Ee.a,{color:n||"error"});default:return null}},ve=function(e){var t=e.msgs,n=e.onClearMsgs,a=e.dateFormat,r=Object(ne.a)(),o=Object(te.a)(r.breakpoints.up("sm"));return c.a.createElement(m.a,{p:2},c.a.createElement(F.a,{container:!0,spacing:1,justify:"space-between",direction:o?"row":"column"},c.a.createElement(F.a,{item:!0},c.a.createElement($.a,{gutterBottom:!0,variant:"h5"},"Messages")),!!n&&c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!o,variant:"contained",onClick:n},"Clear messages"))),c.a.createElement(F.a,{container:!0,direction:"column"},c.a.createElement(m.a,{p:1},t.map((function(e){return c.a.createElement(F.a,{item:!0,key:e.timestamp.getTime()},c.a.createElement(F.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:1,style:{minWidth:32}},c.a.createElement(_e,{msg:e})),c.a.createElement(F.a,{item:!0},function(e){var t=p()(e);return c.a.createElement(F.a,{container:!0,direction:o?"row":"column",alignItems:"center"},c.a.createElement(F.a,{item:!0},c.a.createElement($.a,{variant:"caption"},t.format(a))),c.a.createElement(F.a,{item:!0},c.a.createElement($.a,{variant:"caption"},t.format("HH:mm:ss"))))}(e.timestamp)),c.a.createElement(F.a,{item:!0,xs:!0},c.a.createElement(m.a,{pb:1,pt:1},e.msg))),c.a.createElement(de.a,null))})))))},ge=function(e){var t=e.msgs,n=e.onClearMsgs,a=e.dateFormat,o=Object(r.useState)(!1),i=Object(f.a)(o,2),u=i[0],l=i[1];return c.a.createElement(r.Fragment,null,!!t.length&&c.a.createElement(se.a,{color:"inherit",onClick:function(){return l(!0)}},c.a.createElement(m.a,{pr:1},c.a.createElement($.a,{variant:"caption"},t.length)),c.a.createElement(fe.a,null)),c.a.createElement(Q.a,{open:u,onClose:function(){return l(!1)}},c.a.createElement(ve,{msgs:t,onClearMsgs:function(){l(!1),n&&n()},dateFormat:a})))},Oe=n(177),je=n.n(Oe),ye=n(178),Ce=n.n(ye);function xe(e){if(!e&&0!==e)return"";var t=(Math.abs(e)%100).toString().padStart(2,"0");return Math.trunc(e/100).toString()+"."+t}var we,Se=function(e){var t=e.value,n=e.fontWeight;return c.a.createElement(m.a,{textAlign:"right",fontWeight:n},xe(t))};!function(e){e.W="W",e.C="C",e.D="D",e.CE="CE",e.I="I",e.E="E",e.S="S",e.B="B",e.CBT="CBT",e.CUC="CUC",e.CUW="CUW",e.CUO="CUO",e.CCE="CCE"}(we||(we={}));var ke=we;function Te(e){switch(e){case we.W:return"Contributions for the worldwide work";case we.C:return"Contributions for the local congregation collected from boxes";case we.D:return"Deposit to primary account";case we.CE:return"Contributions for the local congregation received by electronic transfer";case we.I:return"Interest from bank account";case we.E:return"Congregation expenditure";case we.CCE:return"Special Congregation expenditure";case we.S:return"Funds received (For the Branch) for a special purpose";case we.B:return"Contributions for worldwide construction work from boxes";case we.CBT:return"Transfer to Branch";case we.CUC:return"Other - Congregation";case we.CUW:return"Other - Worldwide Work";case we.CUO:return"Other";default:throw new Error("UnknownCode:"+e)}}function We(e){switch(e){case we.W:return"Contrib - WW";case we.C:return"Contrib - Cong";case we.D:return"Deposit";case we.CE:return"Contrib - Electronic";case we.I:return"Interest";case we.CBT:return"Transfer to Branch";case we.B:return"Contrib - Construction";case we.E:case we.CCE:case we.S:case we.CUC:case we.CUW:case we.CUO:return"";default:throw new Error("UnknownCode:"+e)}}function Ae(e){switch(e){case we.W:case we.S:case we.CUW:case we.B:return!1;case we.C:case we.CE:case we.I:case we.E:case we.CCE:case we.CUC:return!0;case we.D:case we.CUO:case we.CBT:return null;default:throw new Error("UnknownCode:"+e)}}var qe,Be=n(8);!function(e){e.WW_BOX="WW_BOX",e.WW_RESOLUTION="WW_RESOLUTION",e.KHAHC="KHAHC",e.GAA="GAA",e.COAA="COAA",e.OTHER="OTHER"}(qe||(qe={}));var Ie=qe;function De(e){switch(e){case qe.WW_BOX:return"Worldwide Work (From Contribution Box)";case qe.WW_RESOLUTION:return"Worldwide Work (Resolution)";case qe.KHAHC:return"Kingdom Hall and Assembly Hall Construction Worldwide (Resolution)";case qe.GAA:return"Global Assistance Arrangement (Resolution)";case qe.COAA:return"Circuit Overseer Assistance Arrangement (Resolution)";case qe.OTHER:return"Other";default:throw new Error("UnknownCode:"+e)}}function Me(e){switch(e){case qe.WW_BOX:return"WW (Box)";case qe.WW_RESOLUTION:return"WW (Resolution)";case qe.KHAHC:return"KHAHC (Resolution)";case qe.GAA:return"GAA (Resolution)";case qe.COAA:return"COAA (Resolution)";case qe.OTHER:return"Other";default:throw new Error("UnknownCode:"+e)}}function Re(){return Object(j.object)().shape({id:Object(j.number)().positive(),code:Object(j.string)().oneOf(Object.keys(Ie)),description:Object(j.string)(),amt:Object(j.number)().integer()})}var Pe=Object(j.string)().test("valid-date","Invalid Date",(function(e){return!e||p()(e,h).format(h)===e}));Object(j.number)().integer().min(0);function Ue(){return Object(j.object)().shape({id:Object(j.number)().integer(),date:Pe.required(),receipts_amt:Object(j.number)().integer().required().when(["code","cash","cheques"],(function(e,t,n,a){switch(e){case ke.C:case ke.W:return a.min(0).oneOf([t+n],"Receipts should match sum of cash and cheques");case ke.D:return a.max(0,"Deposits should be debited from receipts (Receipts should be negative)");case ke.CE:case ke.I:return a.oneOf([0]);default:return a}})),primary_amt:Object(j.number)().integer().required().when(["code","receipts_amt"],(function(e,t,n){switch(e){case ke.C:case ke.W:return n.oneOf([0],"Contributions should be applied as receipts. A separate deposit item should be created for crediting the primary account.");case ke.D:return n.min(0).oneOf([-t],"Receipts and Primary amounts should match for Deposits");case ke.CE:case ke.I:return n.min(0,"Primary amount should be positive for Electronic Contributions / Interest Payments");default:return n}})),other_amt:Object(j.number)().integer().required(),code:Object(j.string)().oneOf(Object.keys(ke)),description:Object(j.string)().required(),apply_on_date:Pe.when(["date"],(function(e,t){return t.test("apply_on_date_gt_date","Applied date should be the same as or later than date",(function(t){return!t||t>=e}))})),breakdown:Object(j.array)().of(Re())}).test("breakdown_total_match","Breakdown total should match one of the transaction amounts",(function(e){var t=e.breakdown;if(!t)return!0;var n=t.reduce((function(e,t){return null==e||null==t.amt?null:e+t.amt}),0);return null==n||n===Math.abs(e.receipts_amt)||n===Math.abs(e.primary_amt)||n===Math.abs(e.other_amt)}))}function Fe(){return O.table("transactions")}function He(e){return new Promise((function(t,n){Ue().validate(e).then((function(){Fe().add(e).then((function(n){t(Object(Be.a)({},e,{id:n}))}),n)}),n)}))}function Ne(e){return Fe().delete(e)}function Ye(e){var t=e||{},n=t.date_min,a=t.date_max,r=t.apply_on_date_min,c=t.apply_on_date_max,o=Le(null,"date",n,a);return(o=Le(o,"apply_on_date",r,c))?o.sortBy("date"):Fe().orderBy("date").toArray()}function Le(e,t,n,a){return a&&n?function(e,t,n,a){if(e)return e.filter((function(e){var r=e[t];return!!r&&r>=n&&r<a}));return Fe().where(t).between(n,a)}(e,t,n,a):n?function(e,t,n){if(e)return e.filter((function(e){var a=e[t];return!a||a>=n}));return Fe().where(t).aboveOrEqual(n)}(e,t,n):a?function(e,t,n){if(e)return e.filter((function(e){var a=e[t];return!!a&&a<n}));return Fe().where(t).below(n)}(e,t,a):e}O.version(1).stores({transactions:"++id,date,apply_on_date"});var Ge=function(e){T(function e(t){return t.msg?e(t.msg):t.message?e(t.message):t.error?e(t.error):t.toString()}(e),w.Error)};function Ve(e){return new Promise((function(t,n){He(e).then((function(e){T("Transaction Created"),t(e)}),(function(e){Ge(e),n(e)}))}))}function Ke(e){return function(e){return Fe().get(e)}(e)}function Xe(e){return new Promise((function(t,n){(function(e){return new Promise((function(t,n){Ue().validate(e).then((function(){Fe().update(e.id,e).then((function(){t(e)}),n)}),n)}))})(e).then((function(e){T("Transaction Updated"),t(e)}),(function(e){Ge(e),n(e)}))}))}function ze(e){return Ye(e)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke.C;return{date:t||E(),apply_on_date:t||E(),description:e,code:n,receipts_amt:0,primary_amt:0,other_amt:0}}function $e(e){return new Promise((function(t,n){Ye({date_max:e}).then((function(n){t(function(e,t){return e.reduce((function(e,n){return e.receipts+=n.receipts_amt,e.primary+=n.primary_amt,e.other+=n.other_amt,n.apply_on_date&&t>n.apply_on_date&&(e.applied_receipts+=n.receipts_amt,e.applied_primary+=n.primary_amt,e.applied_other+=n.other_amt),e}),{date:t,receipts:0,primary:0,other:0,applied_receipts:0,applied_primary:0,applied_other:0})}(n,e))}),n)}))}function Qe(e,t){return new Promise((function(n,a){$e(e).then((function(r){ze({date_min:e,date_max:t}).then((function(e){n({start:r,transactions:e,date_max:t})}),a)}),a)}))}function Ze(e,t){return!e.apply_on_date||e.apply_on_date>=t}function et(){return Object(j.object)().shape({id:Object(j.number)().integer().positive(),title:Object(j.string)().required(),code:Object(j.string)().oneOf(Object.keys(ke))})}function tt(){return O.table("contribution_boxes")}function nt(){return tt().toArray()}function at(){return{code:ke.W,title:We(ke.W)}}function rt(e){return new Promise((function(t,n){var a;(a=e,new Promise((function(e,t){et().validate(a).then((function(){tt().add(a).then((function(t){e(Object(Be.a)({},a,{id:t}))}),t)}),t)}))).then((function(e){T("Contribution Box Created"),t(e)}),(function(e){Ge(e),n(e)}))}))}function ct(e){return function(e){return tt().get(e)}(e)}function ot(e){return new Promise((function(t,n){var a;(a=e,new Promise((function(e,t){et().validate(a).then((function(){tt().update(a.id,a).then((function(){e(a)}),t)}),t)}))).then((function(e){T("Contribution Box Updated"),t(e)}),(function(e){Ge(e),n(e)}))}))}function it(e){return new Promise((function(t,n){(function(e){return tt().delete(e)})(e).then((function(){T("Contribution Box Destroyed"),t()}),(function(e){Ge(e),n(e)}))}))}function ut(){return nt()}O.version(1).stores({contribution_boxes:"++id,title"}),O.on("populate",(function(){[ke.W,ke.C,ke.B].forEach((function(e){O.contribution_boxes.add({code:e,title:We(e)})}))}));var lt=n(17),st=n.n(lt),mt=null;function ft(e,t){var n,a,r;return st.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,st.a.awrap((mt||(mt=new Promise((function(e,t){var n=document.createElement("script");n.src="/pdfform.pdf_js.dist.js",n.async=!0,n.onload=e,n.onerror=t,document.body.appendChild(n)}))),mt));case 2:return c.next=4,st.a.awrap(fetch(e));case 4:return n=c.sent,c.next=7,st.a.awrap(n.arrayBuffer());case 7:return a=c.sent,r=window.pdfform().transform(a,t),c.abrupt("return",r);case 10:case"end":return c.stop()}}))}function dt(e,t){var n,a,r;return st.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,st.a.awrap(ft(e,t));case 2:return n=c.sent,a=new Blob([n],{type:"application/pdf"}),r=URL.createObjectURL(a),c.abrupt("return",r);case 6:case"end":return c.stop()}}))}function pt(e,t){var n,a;return st.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,st.a.awrap(dt(e,t));case 2:n=r.sent,(a=document.createElement("a")).target="_blank",a.href=n,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),window.setTimeout((function(){return URL.revokeObjectURL(n)}),5e3);case 11:case"end":return r.stop()}}))}function ht(e){return e.transactions.reduce((function(t,n){return t+(Ze(n,e.date_max)&&n.primary_amt>0?n.primary_amt:0)}),0)}function bt(e,t){!function(e,t){var n=t.rowNum,a=t.fieldValues,r=e.date,c=e.description,o=e.code,i=e.receipts_amt,u=e.primary_amt,l=e.other_amt,s=e.breakdown;a["900_".concat(7+n,"_Text_C")]=[p()(r,h).date()],a["900_".concat(59+n,"_Text")]=[c],a["900_".concat(111+n,"_Text_C")]=[Et(o)],i>0&&(a["901_".concat(1+n,"_S26Value")]=[xe(i)]);i<0&&(a["901_".concat(54+n,"_S26Value")]=[xe(-i)]);u>0&&(a["902_".concat(1+n,"_S26Value")]=[xe(u)]);u<0&&(a["902_".concat(54+n,"_S26Value")]=[xe(-u)]);l>0&&(a["903_".concat(1+n,"_S26Value")]=[xe(l)]);l<0&&(a["903_".concat(54+n,"_S26Value")]=[xe(-l)]);(s||[]).forEach((function(e,t){a["900_".concat(59+n+t+1,"_Text")]=["".concat(e.description," ").concat(e.amt?"[".concat(xe(e.amt),"]"):"")]}))}(e,t),function(e,t){var n=e.breakdown,a=e.receipts_amt,r=e.primary_amt,c=e.other_amt;a>0?t.receiptsIn+=a:t.receiptsOut-=a;r>0?t.primaryIn+=r:t.primaryOut-=r;c>0?t.otherIn+=c:t.otherOut-=c;t.rowNum++,n&&(t.rowNum+=n.length)}(e,t)}function Et(e){return e===ke.CCE?ke.E:e.length<3?e:""}function _t(e,t,n,a){var r=function(e){return e.transactions.reduce((function(t,n){return t-(Ze(n,e.date_max)&&n.other_amt<0?n.other_amt:0)}),0)}(n),c=function(e){return e.transactions.reduce((function(t,n){return t+(Ze(n,e.date_max)&&n.other_amt>0?n.other_amt:0)}),0)}(n);e["904_43_Text_C"]=[D(t)],e["904_44_S26Amount"]=[xe(a.applied_other)],e["904_45_S26Amount"]=[xe(c)],e["904_47_S26TotalAmount"]=[xe(a.applied_other+c-r)];var o=0;n.transactions.forEach((function(t){Ze(t,a.date)&&t.other_amt<0&&(e["904_".concat(o+48,"_Text")]=[t.description],e["904_".concat(o+49,"_S26Amount")]=[xe(-t.other_amt)],o+=2)})),e["904_54_S26TotalAmount"]=[xe(r)],e["904_56_S26TotalAmount"]=[xe(a.other)]}function vt(e,t,n,a,r){e["904_28_Text_C"]=[p()().format(t.formatting.month_format)],e["904_29_S26Amount"]=[xe(n.receipts)],e["904_30_S26TotalAmount"]=[xe(r.receiptsIn)],e["904_31_S26TotalAmount"]=[xe(r.receiptsOut)],e["904_32_S26TotalAmount"]=[xe(a.receipts)],e["904_33_S26Amount"]=[xe(n.primary)],e["904_34_S26TotalAmount"]=[xe(r.primaryIn)],e["904_35_S26TotalAmount"]=[xe(r.primaryOut)],e["904_36_S26TotalAmount"]=[xe(a.primary)],e["904_37_Text"]=[t.other_account_description],e["904_38_S26Amount"]=[xe(n.other)],e["904_39_S26TotalAmount"]=[xe(r.otherIn)],e["904_40_S26TotalAmount"]=[xe(r.otherOut)],e["904_41_S26TotalAmount"]=[xe(a.other)],e["904_42_S26TotalAmount"]=[xe(a.receipts+a.primary+a.other)]}function gt(e,t,n,a,r){e["904_1_Text_C"]=[D(r)],e["901_53_S26TotalValue"]=[xe(t.receiptsIn)],e["901_106_S26TotalValue"]=[xe(t.receiptsOut)],e["902_53_S26TotalValue"]=[xe(t.primaryIn)],e["902_106_S26TotalValue"]=[xe(t.primaryOut)],e["903_53_S26TotalValue"]=[xe(t.otherIn)],e["903_106_S26TotalValue"]=[xe(t.otherOut)],r.cash_box?function(e,t,n){var a=ht(t);e["904_24_S26Amount"]=[xe(n.applied_primary)],e["904_25_S26Amount"]=[xe(a)],e["904_26_S26Amount"]=[xe(0)],e["904_27_S26Amount"]=[xe(n.primary)]}(e,n,a):function(e,t,n){var a=function(e){return e.transactions.reduce((function(t,n){return t-(Ze(n,e.date_max)&&n.primary_amt<0?n.primary_amt:0)}),0)}(t),r=ht(t);e["904_2_S26Amount"]=[xe(n.applied_primary)],e["904_3_S26Amount"]=[xe(r)],e["904_5_S26TotalAmount"]=[xe(r)];var c=0;t.transactions.forEach((function(t){Ze(t,n.date)&&t.primary_amt<0&&(e["904_".concat(c+6,"_Text")]=[t.description],e["904_".concat(c+7,"_S26Amount")]=[xe(-t.primary_amt)],c+=2)})),e["904_20_S26TotalAmount"]=[xe(a)],e["904_23_S26TotalAmount"]=[xe(n.primary)]}(e,n,a)}function Ot(e){return e.transactions.reduce((function(e,t){return Ae(t.code)?(t.receipts_amt>0&&(e+=t.receipts_amt),t.primary_amt>0&&(e+=t.primary_amt),t.other_amt>0&&(e+=t.other_amt),e):e}),0)}function jt(e,t,n){var a=t.start;e["900_1_Text"]=[n.congregation_name],e["900_2_Text"]=[p()(a.date,h).format(n.formatting.month_format)],e["901_1_S30BOM"]=[xe(a.receipts+a.primary+a.other)]}function yt(e,t){var n=t.transactions,a=n.reduce((function(e,t){return e+(t.code===ke.C?t.receipts_amt:0)}),0),r=n.reduce((function(e,t){return e+(t.code===ke.CE?t.primary_amt:0)}),0);e["901_2_S30CongRec"]=[xe(a)],e["901_3_S30CongRec"]=[xe(r)];var c=0,o=n.reduce((function(e,t){return e+(t.code===ke.I?t.primary_amt:0)}),0);o&&(e["900_".concat(3+c,"_Text")]=["Interest"],e["901_".concat(4+c,"_S30CongRec")]=[xe(o)],c++),n.forEach((function(t){if(t.code!==ke.C&&t.code!==ke.CE&&t.code!==ke.I&&Ae(t.code)){var n=0;t.receipts_amt>0&&(n+=t.receipts_amt),t.primary_amt>0&&(n+=t.primary_amt),t.other_amt>0&&(n+=t.other_amt),n&&(e["900_".concat(3+c,"_Text")]=[t.description],e["901_".concat(4+c,"_S30CongRec")]=[xe(n)],c++)}}));var i=Ot(t);e["901_6_S30TotalCongRec"]=[xe(i)];var u=n.reduce((function(e,t){return e+(t.code===ke.W?t.receipts_amt:0)}),0);e["901_7_S30OtherRec"]=[xe(u)],c=0;var l=n.reduce((function(e,t){return e+(t.code===ke.B?t.receipts_amt:0)}),0);l&&(e["900_".concat(5+c,"_Text")]=["Contrib - Construction"],e["901_".concat(8+c,"_S30OtherRec")]=[xe(l)],c++),n.forEach((function(t){if(t.code!==ke.W&&t.code!==ke.B&&!1===Ae(t.code)){var n=0;t.receipts_amt>0&&(n+=t.receipts_amt),t.primary_amt>0&&(n+=t.primary_amt),t.other_amt>0&&(n+=t.other_amt),n&&(e["900_".concat(5+c,"_Text")]=[t.description],e["901_".concat(8+c,"_S30OtherRec")]=[xe(n)],c++)}}));var s=n.reduce((function(e,t){return!1!==Ae(t.code)?e:(t.receipts_amt>0&&(e+=t.receipts_amt),t.primary_amt>0&&(e+=t.primary_amt),t.other_amt>0&&(e+=t.other_amt),e)}),0);e["901_10_S30TotalOtherRec"]=[xe(s)];var m=i+s;return e["901_11_S30TotalRec"]=[xe(m)],m}function Ct(e,t){return e.transactions.reduce((function(e,n){return n.breakdown&&(e+=n.breakdown.reduce((function(e,n){return n.amt&&n.code===t&&(e+=n.amt),e}),e)),e}),0)}function xt(e,t){var n=t.transactions.reduce((function(e,t){return e-(t.code===ke.E?t.primary_amt:0)}),0);e["901_12_S30CongEx"]=[xe(n)];var a=Ct(t,Ie.WW_RESOLUTION),r=Ct(t,Ie.KHAHC),c=Ct(t,Ie.GAA),o=Ct(t,Ie.COAA);e["901_13_S30CongEx"]=[xe(a)],e["901_14_S30CongEx"]=[xe(r)],e["901_15_S30CongEx"]=[xe(c)],e["901_16_S30CongEx"]=[xe(o)];var i=0,u=0;t.transactions.forEach((function(t){t.code===ke.CCE&&(e["900_".concat(7+i,"_Text")]=[t.description],e["901_".concat(8+i,"_S30OtherRec")]=[xe(-t.primary_amt)],u-=t.primary_amt,i++)}));var l=n+a+r+c+o+u;e["901_19_S30TotalCongEx"]=[xe(l)];var s=t.transactions.reduce((function(e,t){return e+(t.code===ke.W?t.receipts_amt:0)}),0);e["901_20_S30OtherDis"]=[xe(s)];var m=t.transactions.reduce((function(e,t){return e+(t.code===ke.B?t.receipts_amt:0)}),0);e["901_21_S30OtherDis"]=[xe(m)];var f=s+m;e["901_23_S30TotalOtherDis"]=[xe(f)];var d=l+f;return e["901_24_S30TotalDisburse"]=[xe(d)],d}function wt(e,t,n,a,r){var c=t.start;e["901_25_S30SurDef"]=[xe(n-a)];var o=c.receipts+c.primary+c.other+n-a;return e["901_26_S30TotalEOM"]=[xe(o)],e["900_13_Text_C"]=[r.accounts_servant_or_overseer],o}function St(e,t,n){var a=Ot(t),r=function(e){return e.transactions.reduce((function(e,t){return!1!==Ae(t.code)?e:(t.receipts_amt>0&&(e+=t.receipts_amt),t.primary_amt>0&&(e+=t.primary_amt),t.other_amt>0&&(e+=t.other_amt),e)}),0)}(t),c=t.start,o=c.receipts+c.primary+c.other;e["900_14_Text_C"]=[p()(t.start.date,h).format(n.formatting.month_format)],e["901_31_S30TotalDonation"]=[xe(a)],e["901_32_S30TotalExpense"]=[xe(r)],e["901_33_S30MonthEnd"]=[xe(o+a-r)];var i=t.transactions.reduce((function(e,t){return t.code===ke.CBT?e-(t.receipts_amt+t.primary_amt+t.other_amt):e}),0);e["901_34_S30ToWWW"]=[xe(i)]}var kt=function(e){var t=e.description,n=e.receipts,a=e.primary,r=e.other;return c.a.createElement(F.a,{container:!0,spacing:1,justify:"flex-end"},!!t&&c.a.createElement(F.a,{item:!0,xs:12,md:6},c.a.createElement(m.a,{textAlign:"left"},t)),c.a.createElement(F.a,{item:!0,xs:4,md:2},n),c.a.createElement(F.a,{item:!0,xs:4,md:2},a),c.a.createElement(F.a,{item:!0,xs:4,md:2},r))},Tt=n(48),Wt=n.n(Tt),At=n(100),qt=n.n(At),Bt=n(28),It=n.n(Bt),Dt=function(e){var t=e.msg;return c.a.createElement(m.a,{p:2},c.a.createElement(F.a,{container:!0,justify:"center"},c.a.createElement(F.a,{item:!0},c.a.createElement($.a,{variant:"h6"},t))))},Mt=function(e){var t=Object(r.useState)(!1),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(Be.a)({},e);return delete i.confirmText,c.a.createElement(r.Fragment,null,c.a.createElement(se.a,Object.assign({},i,{onClick:function(){return o(!0)}})),c.a.createElement(Q.a,{open:a},c.a.createElement(m.a,{p:2},c.a.createElement(F.a,{container:!0,spacing:2},c.a.createElement(F.a,{item:!0,xs:12},e.confirmText),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(se.a,{fullWidth:!0,color:"default",variant:"contained",onClick:function(){return o(!1)}},"No")),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(se.a,{fullWidth:!0,color:"primary",variant:"contained",onClick:function(t){o(!1),e.onClick&&e.onClick(t)}},"Yes"))))))};Mt.defaultProps={confirmText:"Are You Sure?"};var Rt=Mt,Pt=n(382),Ut=n(379),Ft=n(387),Ht=n(376),Nt=function(e){function t(e){var n;return Object(ae.a)(this,t),(n=Object(ce.a)(this,Object(oe.a)(t).call(this,e))).handleRemove=n.handleRemove.bind(Object(ie.a)(n)),n.renderWrapper=n.renderWrapper.bind(Object(ie.a)(n)),n.state={wrappers:e.items.map((function(e){return{item:e,in:!0,targetIn:!0}}))},n}return Object(ue.a)(t,e),Object(re.a)(t,[{key:"doRemovals",value:function(e,t){var n=this.props.identifier;t.forEach((function(t){t.targetIn=!!e.find((function(e){return n(e)===n(t.item)}))}))}},{key:"doInsertionsAndUpdates",value:function(e,t){for(var n=this.props.identifier,a=function(a){var r=e[a],c=t.findIndex((function(e){return n(r)===n(e.item)}));c>=0?t[c].item=r:t.splice(a,0,{item:r,in:!1,targetIn:!0})},r=0;r<e.length;r++)a(r)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.items,n=this.state.wrappers.slice();this.doRemovals(t,n),this.doInsertionsAndUpdates(t,n),this.setState({wrappers:n})}},{key:"componentDidUpdate",value:function(){var e=!1,t=this.state.wrappers.map((function(t){return t.in!==t.targetIn&&(t.in=t.targetIn,e=!0),t}));e&&this.setState({wrappers:t})}},{key:"handleRemove",value:function(e){var t=this;this.setState({wrappers:this.state.wrappers.filter((function(n){return t.props.identifier(n.item)!==e}))})}},{key:"renderWrapper",value:function(e){var t=this,n=this.props.identifier;return c.a.createElement(Ht.a,{key:n(e.item),in:e.in,timeout:this.props.timeout,onExited:function(){return t.handleRemove(n(e.item))}},this.props.component(e.item))}},{key:"render",value:function(){return this.state.wrappers.map(this.renderWrapper)}}]),t}(r.Component);Nt.defaultProps={animation:!0};var Yt=Nt;var Lt=function(e){var t=e.label,n=e.options,a=e.value,o=e.keyFn,i=e.titleFn,u=e.descriptionFn,l=e.onChange,s=Object(r.useState)(!1),d=Object(f.a)(s,2),p=d[0],h=d[1],b=Object(r.useState)(!1),E=Object(f.a)(b,2),_=E[0],v=E[1];return c.a.createElement(r.Fragment,null,c.a.createElement(Pt.a,{fullWidth:!0,label:t,value:i(a),variant:"outlined",onFocus:function(){_||(v(!0),h(!0))},onBlur:function(){p||v(!1)},onClick:function(){h(!0)},inputProps:{style:{caretColor:"transparent"}}}),c.a.createElement(Q.a,{open:p,onClose:function(){return h(!1)}},c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,spacing:1,direction:"column"},n.map((function(e){return c.a.createElement(F.a,{item:!0,key:o(e)},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){h(!1),l(e)},style:{textAlign:"left"}},u(e)))}))))))},Gt=function(e){var t=e.name,n=e.label,a=e.value,o=e.onChange,i=e.error,u=e.helperText,l=e.required;l&&void 0===i&&(i=null==a);var s=Object(r.useState)(xe(a)),m=Object(f.a)(s,2),d=m[0],p=m[1],h=Object(r.useState)(a),b=Object(f.a)(h,2),E=b[0],_=b[1];function v(){var e=function(e){return e?Math.round(100*Number.parseFloat(e)):void 0}(d);p(xe(e)),o(e)}return a!==E&&(p(xe(a)),_(a)),c.a.createElement(Pt.a,{name:t,label:n,fullWidth:!0,type:"number",variant:"outlined",value:d,error:i,helperText:u,required:l,onChange:function(e){return p(e.target.value)},onFocus:function(e){return e.target.select()},onBlur:function(){return v()},onKeyDown:function(e){"Enter"===e.key&&v()}})},Vt=function(e){var t=e.breakdown,n=e.onChange,a=e.children,r=e.descriptionRequired,o=e.amtRequired;return c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:12,sm:!0},c.a.createElement(Lt,{label:"Type",value:t.code,keyFn:function(e){return e},titleFn:De,descriptionFn:De,options:Object.keys(Ie),onChange:function(e){return n(Object(Be.a)({},t,{code:e,description:e===Ie.OTHER?"":Me(e)}))}})),c.a.createElement(F.a,{item:!0,xs:!0,sm:4},c.a.createElement(Gt,{label:"Amount",value:t.amt,required:o,onChange:function(e){return n(Object(Be.a)({},t,{amt:e}))}})),c.a.createElement(F.a,{item:!0},a),c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(Ht.a,{in:!!t.code},c.a.createElement(Pt.a,{required:r,fullWidth:!0,multiline:!0,label:"Description",variant:"outlined",value:t.description,onChange:function(e){return n(Object(Be.a)({},t,{description:e.target.value}))}}))))};Vt.defaultProps={descriptionRequired:!1};var Kt=Vt,Xt=function(e){var t=e.breakdowns,n=e.onChange,a=e.amtRequired,o=Object(r.useState)({code:Ie.OTHER,description:"",amt:0}),i=Object(f.a)(o,2),u=i[0],l=i[1];function s(e){return d(e,h,c.a.createElement(Rt,{variant:"contained",onClick:function(){return function(e){var a=t.findIndex((function(t){return t.id===e.id})),r=t.slice();r.splice(a,1),n(r)}(e)}},"Delete"))}function d(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return c.a.createElement(m.a,{key:e.id,pb:3},c.a.createElement(Kt,{breakdown:e,onChange:t,descriptionRequired:r,amtRequired:a},n))}function p(){var e=t.slice();e.push(Object(Be.a)({},u,{id:(new Date).getTime()})),n(e)}function h(e){var a=t.findIndex((function(t){return t.id===e.id})),r=t.slice();r[a]=e,n(r)}return c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},c.a.createElement(Yt,{items:t,identifier:function(e){return e.id},component:s}),d(u,l,c.a.createElement(se.a,{variant:"contained",onClick:p},"Create"),!1)))},zt=n(23),Jt=n(384),$t=n(175),Qt=function(e){var t=e.value,n=e.onChange,a=e.label,o=e.required,i=e.displayFormat,u=Object(r.useState)(!1),l=Object(f.a)(u,2),s=l[0],m=l[1],d=Object(r.useState)(!1),b=Object(f.a)(d,2),E=b[0],_=b[1];!t&&o&&(t=p()().format(h));var v=t?p()(t,h).format(i||h):"";function g(e){e&&!E?(m(!0),_(!0)):s||_(!1)}return c.a.createElement(zt.a,{utils:$t.a},c.a.createElement(Pt.a,{fullWidth:!0,required:o,variant:"outlined",label:a,value:v,onFocus:function(){return g(!0)},onBlur:function(){return g(!1)},onClick:function(){return m(!0)},inputProps:{style:{caretColor:"transparent"}}}),c.a.createElement(Q.a,{open:s,onClose:function(){return m(!1)}},c.a.createElement(Jt.a,{variant:"static",value:t?p()(t,h):p()(),onChange:function(e){var t=p()(e);n(t.format(h)),m(!1)}}),c.a.createElement(se.a,{variant:"contained",onClick:function(){n(void 0),m(!1)}},"Clear")))},Zt=function(e){var t=e.transaction,n=e.onSubmit,a=e.children,o=Object(r.useState)(t),i=Object(f.a)(o,2),u=i[0],l=i[1],s=!!u.breakdown,d=Object(r.useState)(!1),p=Object(f.a)(d,2),h=p[0],b=p[1],E=P();function _(e){var t=e.code,n=e.cash,a=e.cheques;return null!=n&&null!=a&&(t===ke.D?(e.primary_amt=n+a,e.receipts_amt=-e.primary_amt):e.receipts_amt=n+a),e}return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u)}},c.a.createElement(m.a,{pt:2,pb:2},c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},c.a.createElement(F.a,{item:!0},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:3},c.a.createElement(Lt,{label:"Code",value:u.code,keyFn:function(e){return e},titleFn:function(e){return e},descriptionFn:function(e){return c.a.createElement(F.a,{container:!0,spacing:2},c.a.createElement(F.a,{item:!0,xs:2},c.a.createElement($.a,{variant:"h6"},e)),c.a.createElement(F.a,{item:!0,xs:!0},Te(e)))},options:Object.keys(ke),onChange:function(e){var t=e,n=Object(Be.a)({},u,{code:t,description:We(t)});l(n),b(h&&!n.description)}})),c.a.createElement(F.a,{item:!0,xs:9},c.a.createElement(Pt.a,{required:!0,fullWidth:!0,multiline:!0,error:h,label:"Description",variant:"outlined",value:u.description,onChange:function(e){l(Object(Be.a)({},u,{description:e.target.value})),b(!e.target.value)},onBlur:function(){return b(!u.description)}})))),c.a.createElement(F.a,{item:!0},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Qt,{value:u.date,onChange:function(e){l(Object(Be.a)({},u,{date:e,apply_on_date:e}))},label:"Date",required:!0,displayFormat:E.formatting.date_format})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Qt,{value:u.apply_on_date,onChange:function(e){l(Object(Be.a)({},u,{apply_on_date:e}))},label:"Applicable Date",required:!1,displayFormat:E.formatting.date_format})))),c.a.createElement(F.a,{item:!0},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:4},c.a.createElement(Gt,{required:!0,label:"Receipts",value:u.receipts_amt,onChange:function(e){return l(Object(Be.a)({},u,{receipts_amt:e}))}})),c.a.createElement(F.a,{item:!0,xs:4},c.a.createElement(Gt,{required:!0,label:"Primary",value:u.primary_amt,onChange:function(e){return l(Object(Be.a)({},u,{primary_amt:e}))}})),c.a.createElement(F.a,{item:!0,xs:4},c.a.createElement(Gt,{required:!0,label:"Other",value:u.other_amt,onChange:function(e){return l(Object(Be.a)({},u,{other_amt:e}))}})))),c.a.createElement(F.a,{item:!0},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Gt,{label:"Cash",value:u.cash,onChange:function(e){l(_(Object(Be.a)({},u,{cash:e})))}})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Gt,{label:"Cheques",value:u.cheques,onChange:function(e){l(_(Object(Be.a)({},u,{cheques:e})))}})))),c.a.createElement(F.a,{item:!0},c.a.createElement(Pt.a,{fullWidth:!0,label:"Confirmation Code",variant:"outlined",value:u.confirmation_code,onChange:function(e){return l(Object(Be.a)({},u,{confirmation_code:e.target.value}))}})),c.a.createElement(F.a,{item:!0},c.a.createElement(m.a,{pl:1,pr:1,pt:1},c.a.createElement(Ut.a,{control:c.a.createElement(Ft.a,{checked:s,color:"primary",onChange:function(){return l(Object(Be.a)({},u,{breakdown:s?void 0:[]}))}}),label:"Include Breakdown"}))),c.a.createElement(F.a,{item:!0},c.a.createElement(Ht.a,{in:s},!!u.breakdown&&c.a.createElement(Xt,{breakdowns:u.breakdown,onChange:function(e){return l(Object(Be.a)({},u,{breakdown:e}))}}))),c.a.createElement(F.a,{item:!0},c.a.createElement(m.a,{pb:2,pt:1},c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},a)))))))},en="/update-transaction/:transactionId";function tn(e){return en.replace(":transactionId",e.toString())}var nn=function(e){(0,e.setTitle)("Update Transaction");var t=Object(l.g)().push,n=parseInt(Object(l.i)().transactionId),a=Object(r.useState)(!1),o=Object(f.a)(a,2),i=o[0],u=o[1],s=Object(r.useState)(void 0),d=Object(f.a)(s,2),p=d[0],h=d[1],b=Object(ne.a)(),E=Object(te.a)(b.breakpoints.up("sm"));return Object(r.useEffect)((function(){var e=!0;return u(!0),Ke(n).then((function(t){e&&(h(t),u(!1))}),(function(){e&&u(!1)})),function(){e=!1}}),[n]),i?c.a.createElement(N,null):p?c.a.createElement(r.Fragment,null,c.a.createElement(F.a,{container:!0},c.a.createElement(F.a,{item:!0,xs:!E||"auto"},c.a.createElement(m.a,{p:1},c.a.createElement(se.a,{fullWidth:!E,variant:"contained",onClick:function(){return t(dn(v(p.date)))}},c.a.createElement(It.a,null),"Back to Month")))),c.a.createElement(Zt,{transaction:p,onSubmit:function(e){return u(!0),new Promise((function(n,a){Xe(e).then((function(){u(!1),n(),t(dn(v(e.date)))}),(function(e){u(!1),a(e)}))}))}},i?c.a.createElement(N,null):c.a.createElement(F.a,{container:!0,direction:E?"row":"column",spacing:1,alignItems:"stretch"},c.a.createElement(F.a,{item:!0,xs:!E||"auto"},c.a.createElement(se.a,{fullWidth:!E,type:"submit",variant:"contained",color:"primary"},c.a.createElement(Wt.a,null),"Update Transaction")),c.a.createElement(F.a,{item:!0,xs:!E||"auto"},c.a.createElement(Rt,{fullWidth:!E,type:"button",variant:"contained",onClick:function(){return u(!0),new Promise((function(e,n){var a;(a=p.id,new Promise((function(e,t){Ne(a).then((function(){T("Transaction Destroyed"),e()}),(function(e){Ge(e),t(e)}))}))).then((function(){e(),p&&t(dn(v(p.date)))}),(function(e){u(!1),n(e)}))}))}},c.a.createElement(qt.a,null),"Delete Transaction"))))):c.a.createElement(Dt,{msg:"No Transaction Found"})};var an=Object(j.object)().shape({settings:Object(j.object)().required(),transactionSet:Object(j.object)().shape({start:Object(j.object)().shape({date:Pe.required(),receipts:Object(j.number)().integer(),primary:Object(j.number)().integer(),other:Object(j.number)().integer(),applied_receipts:Object(j.number)().integer(),applied_primary:Object(j.number)().integer(),applied_other:Object(j.number)().integer()}),transactions:Object(j.array)().of(Ue().required())}).required()}).test("expected_contributions","Missing Expected Contributions",(function(e){var t=e.settings,n=e.boxes,a=e.transactionSet,r=a.transactions,c=a.start,o=[];return function(e,t){for(var n=p()(e,b).startOf("month"),a=n.month(),r=[];n.get("month")===a;)(0===n.day()&&t.sun||1===n.day()&&t.mon||2===n.day()&&t.tue||3===n.day()&&t.wed||4===n.day()&&t.thu||5===n.day()&&t.fri||6===n.day()&&t.sat)&&r.push(n.format(h)),n.add(1,"day");return r}(v(c.date),t.meeting_days).forEach((function(e){n.forEach((function(n){r.find((function(t){return e===t.date&&n.code===t.code}))||o.push("".concat(M(t,e)," (").concat(n.code,")"))}))})),!o.length||this.createError({message:"Missing contributions : "+o.join(", ")})})).test("no_duplicate_contributions","No Duplicate Contributions",(function(e){var t=e.settings,n=e.transactionSet.transactions,a=n.filter((function(e){return(e.code===ke.W||e.code===ke.C)&&!!n.find((function(t){return e.id<t.id&&e.code===t.code&&e.date===t.date}))}));return!a.length||this.createError({message:"More than one contribution found on: ".concat(a.map((function(e){return M(t,e.date)+" ("+e.code+")"})).join(", "))})})).test("receipts_balance","Receipts should balance at 0",(function(e){return 0===e.transactionSet.transactions.reduce((function(e,t){return e+t.receipts_amt}),0)})).test("no_unapplied_transactions","There were unapplied transactions",(function(e){var t=e.transactionSet.transactions.filter((function(e){return!e.apply_on_date}));return!t.length||this.createError({message:"Unapplied transactions found on: ".concat(t.map((function(t){return M(e.settings,t.date)+" ("+t.code+")"})).join(", "))})})).test("has_min_interest","Expected additional interest payments",(function(e){var t=e.transactionSet,n=e.settings;return t.transactions.reduce((function(e,t){return e+(t.code===ke.I?1:0)}),0)>=n.min_num_interest})).test("has_min_expenditures","Expected additional expenditures",(function(e){var t=e.transactionSet,n=e.settings;return t.transactions.reduce((function(e,t){return e+(t.code===ke.E?1:0)}),0)>=n.min_num_expenditure})),rn=function(e){var t=e.warnings;return e.working?c.a.createElement(N,null):t?c.a.createElement(F.a,{container:!0,direction:"column"},t.map((function(e){return c.a.createElement(F.a,{key:e,container:!0,spacing:1},c.a.createElement(F.a,{item:!0},c.a.createElement(m.a,{color:"error.main"},c.a.createElement(Ee.a,null))),c.a.createElement(F.a,{item:!0,xs:!0},e))}))):null},cn="/month-warnings/:month";var on=function(e){var t=e.setTitle,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),d=s[0],E=s[1],_=P(),v=Object(l.g)().push,g=Object(ne.a)(),O=Object(te.a)(g.breakpoints.up("sm")),j=Object(l.i)().month,y=p()(j,b).startOf("month"),C=y.format(h),x=y.add(1,"month").format(h);return t("".concat(p()(j,b).format(_.formatting.month_format)," Warnings")),Object(r.useEffect)((function(){var e=!0;return i(!0),Promise.all([Qe(C,x),ut()]).then((function(t){var n=Object(f.a)(t,2),a=n[0],r=n[1];e&&an.validate({transactionSet:a,settings:_,boxes:r},{abortEarly:!1}).then((function(){e&&(E([]),i(!1))}),(function(t){e&&(E(t.errors),i(!1))}))}),(function(){e&&i(!1)})),function(){e=!1}}),[C,x,_]),c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,direction:"column"},c.a.createElement(F.a,{item:!0,xs:!O||"auto"},c.a.createElement(m.a,{pb:1},c.a.createElement(se.a,{fullWidth:!O,variant:"contained",onClick:function(){return v(dn(j))}},c.a.createElement(It.a,null),"Back to Month"))),c.a.createElement(rn,{warnings:d,working:o})))};var un="/date-balance/:date";function ln(e,t){var n=un.replace(":date",e);return t&&(n+="?month="+t),n}var sn=function(e){var t=e.setTitle,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),d=s[0],p=s[1],h=Object(r.useState)(void 0),b=Object(f.a)(h,2),E=b[0],_=b[1],g=Object(l.i)().date,O=new URLSearchParams(Object(l.h)().search),j=P();t("".concat(M(j,g)," Balance"));var y=Object(l.g)().push,C=Object(ne.a)(),x=Object(te.a)(C.breakpoints.up("sm"));if(Object(r.useEffect)((function(){var e=!0;return i(!0),Promise.all([$e(g),ze({date_max:g,apply_on_date_min:g})]).then((function(t){var n=Object(f.a)(t,2),a=n[0],r=n[1];e&&(p(a),_(r),i(!1))}),(function(){e&&i(!1)})),function(){e=!1}}),[g]),o)return c.a.createElement(N,null);return c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0},c.a.createElement(F.a,{item:!0,xs:!x||"auto"},c.a.createElement(m.a,{pb:1},c.a.createElement(se.a,{fullWidth:!x,variant:"contained",onClick:function(){return y(dn(O.get("month")||v(g)))}},c.a.createElement(It.a,null),"Back to Month")))),d?c.a.createElement(m.a,{pt:1},c.a.createElement(kt,{description:"Balance on Statement",receipts:c.a.createElement(Se,{value:d.applied_receipts,fontWeight:500}),primary:c.a.createElement(Se,{value:d.applied_primary,fontWeight:500}),other:c.a.createElement(Se,{value:d.applied_other,fontWeight:500})})):null,c.a.createElement(de.a,null),c.a.createElement($.a,{variant:"h6"},"Pending Transactions"),E?E.map((function(e){return c.a.createElement(m.a,{key:e.id,pb:1},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return y(tn(e.id))}},c.a.createElement(kt,{description:e.description,receipts:c.a.createElement(Se,{value:e.receipts_amt}),primary:c.a.createElement(Se,{value:e.primary_amt}),other:c.a.createElement(Se,{value:e.other_amt})})))})):null,c.a.createElement(de.a,null),d?c.a.createElement(m.a,{pb:1},c.a.createElement(kt,{description:"Account Balance",receipts:c.a.createElement(Se,{value:d.receipts,fontWeight:500}),primary:c.a.createElement(Se,{value:d.primary,fontWeight:500}),other:c.a.createElement(Se,{value:d.other,fontWeight:500})})):null)},mn=function(e){var t=e.open,n=e.onClose,a=e.warnings,r=e.working;return c.a.createElement(Q.a,{open:t,onClose:n},c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,direction:"column"},c.a.createElement(F.a,{item:!0},c.a.createElement($.a,{variant:"h6"},"Warnings")),c.a.createElement(rn,{warnings:a,working:r}))))},fn="/month-transactions/:month";function dn(e){return fn.replace(":month",e||_())}var pn=function(e){var t=e.setTitle,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),d=s[0],E=s[1],v=Object(r.useState)(void 0),g=Object(f.a)(v,2),O=g[0],j=g[1],y=Object(r.useState)(void 0),C=Object(f.a)(y,2),x=C[0],w=C[1],S=Object(r.useState)(!1),k=Object(f.a)(S,2),T=k[0],W=k[1],A=P(),q=Object(l.g)().push,B=Object(ne.a)(),I=Object(te.a)(B.breakpoints.up("sm")),D=Object(l.i)().month,M=p()(D,b).startOf("month"),R=M.format(h),U=M.add(1,"month").format(h);function H(e){var t=p()(D,b).add(e,"months").format(b);q(dn(t))}function Y(){I?W(!0):q(function(e){return cn.replace(":month",e||_())}(D))}function L(e){return c.a.createElement(m.a,{textAlign:"right",fontWeight:500},e)}return t("".concat(p()(D,b).format(A.formatting.month_format)," Transactions")),Object(r.useEffect)((function(){var e=!0;return i(!0),w(void 0),Promise.all([Qe(R,U),$e(U),ut()]).then((function(t){var n=Object(f.a)(t,3),a=n[0],r=n[1],c=n[2];e&&(E(a),j(r),an.validate({transactionSet:a,settings:A,boxes:c},{abortEarly:!1}).then((function(){e&&(i(!1),w([]))}),(function(t){e&&(i(!1),w(t.errors))})))}),(function(t){e&&(i(!1),w(t.errors))})),function(){e=!1}}),[D,R,U,A]),o?c.a.createElement(N,null):c.a.createElement(r.Fragment,null,c.a.createElement(F.a,{container:!0,spacing:1,justify:"space-between"},c.a.createElement(F.a,{item:!0},c.a.createElement(se.a,{variant:"contained",title:"Previous Month",style:{minWidth:40},onClick:function(){return H(-1)}},c.a.createElement(je.a,null))),c.a.createElement(F.a,{item:!0},c.a.createElement(m.a,{textAlign:"center"},c.a.createElement(se.a,{variant:"contained",title:"Generate S26",style:{minWidth:40},onClick:function(){return function(e,t,n){var a,r,c,o,i;return st.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return a=e.start,r=e.transactions,c=p()(a.date,h),o={rowNum:0,receiptsIn:0,receiptsOut:0,primaryIn:0,primaryOut:0,otherIn:0,otherOut:0,fieldValues:{"900_1_Text_C":[n.congregation_name],"900_2_Text_C":[n.city],"900_3_Text_C":[n.province_or_state],"900_4_Text_C":[c.format("MMMM")],"900_5_Text_C":[c.year()],"900_6_Text_C":[n.other_account_description]}},r.forEach((function(e){return bt(e,o)})),gt(i=o.fieldValues,o,e,t,n),vt(i,n,e.start,t,o),_t(i,n,e,t),u.next=10,st.a.awrap(pt("/pdf/S-26-E.pdf",i));case 10:case"end":return u.stop()}}))}(d,O,A)}},"S26"),c.a.createElement(se.a,{variant:"contained",title:"Generate S30",style:{minWidth:40},onClick:function(){return function(e,t){var n,a,r;return st.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return jt(n={},e,t),a=yt(n,e),r=xt(n,e),wt(n,e,a,r,t),St(n,e,t),c.next=8,st.a.awrap(pt("/pdf/S-30-E.pdf",n));case 8:case"end":return c.stop()}}))}(d,A)}},"S30"),c.a.createElement(se.a,{variant:"contained",title:"View Warnings",style:{minWidth:40},disabled:!(x&&x.length),onClick:Y},c.a.createElement(Ee.a,null),x&&!!x.length&&x.length))),c.a.createElement(F.a,{item:!0},c.a.createElement(se.a,{variant:"contained",title:"Next Month",style:{minWidth:40},onClick:function(){return H(1)}},c.a.createElement(Ce.a,null)))),c.a.createElement(m.a,{p:1},c.a.createElement(kt,{receipts:L("Receipts"),primary:L("Primary"),other:L("Other")})),d?c.a.createElement(m.a,{pb:1},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return q(ln(R,D))}},c.a.createElement(kt,{description:"Opening Balance",receipts:c.a.createElement(Se,{value:d.start.receipts}),primary:c.a.createElement(Se,{value:d.start.primary}),other:c.a.createElement(Se,{value:d.start.other})}))):null,d?d.transactions.map((function(e){return c.a.createElement(m.a,{key:e.id,pb:1},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return q(tn(e.id))}},c.a.createElement(kt,{description:"".concat(p()(e.date,h).date(),": ").concat(e.description),receipts:c.a.createElement(Se,{value:e.receipts_amt}),primary:c.a.createElement(Se,{value:e.primary_amt}),other:c.a.createElement(Se,{value:e.other_amt})})))})):null,O?c.a.createElement(m.a,{pb:1},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return q(ln(U,D))}},c.a.createElement(kt,{description:"Closing Balance",receipts:c.a.createElement(Se,{value:O.receipts,fontWeight:500}),primary:c.a.createElement(Se,{value:O.primary,fontWeight:500}),other:c.a.createElement(Se,{value:O.other,fontWeight:500})}))):null,I&&d?c.a.createElement(mn,{working:o,warnings:x,open:T&&I,onClose:function(){return W(!1)}}):null)},hn=Object(j.number)().integer().min(0).required();function bn(e){return new Promise((function(t,n){function a(e){Ge(e),n(e)}Object(j.object)().shape({date:Pe.required(),special_contribution_boxes:Object(j.array)().of(Object(j.object)().shape({cash:hn,cheques:hn,box:et().required()}).required())}).validate(e).then((function(){var n=e.date;Promise.all(e.boxes.map((function(e){return function(e,t,a,r){var c=Je(t,n,e);return c.cash=a||0,c.cheques=r||0,c.receipts_amt=c.cash+c.cheques,Ve(c)}(e.box.code,e.box.title,e.cash,e.cheques)}))).then((function(){return t(e)}),a)}),a)}))}var En=n(35),_n=n.n(En),vn=function(e){var t=e.meeting,n=e.onSubmit,a=e.working,o=Object(r.useState)(t),i=Object(f.a)(o,2),u=i[0],l=i[1],s=u.boxes,d=s.reduce((function(e,t){return e+t.cash}),0),p=s.reduce((function(e,t){return e+t.cheques}),0);function h(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c.a.createElement(r.Fragment,null,c.a.createElement(m.a,{p:2,pt:0,pb:1},c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:12,sm:!0},e),c.a.createElement(F.a,{item:!0,xs:4,sm:2},t),c.a.createElement(F.a,{item:!0,xs:4,sm:2},n),c.a.createElement(F.a,{item:!0,xs:4,sm:2},a))),o&&c.a.createElement(de.a,null))}function b(e,t){var n=u.boxes.slice();n[t]=e,l(Object(Be.a)({},u,{boxes:n}))}return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u)}},c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},c.a.createElement(F.a,{item:!0},c.a.createElement(Qt,{required:!0,value:u.date,onChange:function(e){return l(Object(Be.a)({},u,{date:e}))},label:"Date"})),c.a.createElement(F.a,{item:!0},h("",c.a.createElement($.a,{style:{fontWeight:500,textAlign:"right"}},"Cash"),c.a.createElement($.a,{style:{fontWeight:500,textAlign:"right"}},"Cheques"),c.a.createElement($.a,{style:{fontWeight:500,textAlign:"right"}},"Total"))),s.map((function(e,t){return c.a.createElement(F.a,{item:!0,key:t},function(e,t,n,a,r){var o=t+a;return h(e,c.a.createElement(Gt,{value:t,onChange:n,required:!0}),c.a.createElement(Gt,{value:a,onChange:r,required:!0}),!Number.isNaN(o)&&c.a.createElement(Se,{value:o}),!0)}(e.box.title,e.cash,(function(n){return b(Object(Be.a)({},e,{cash:n}),t)}),e.cheques,(function(n){return b(Object(Be.a)({},e,{cheques:n}),t)})))})),c.a.createElement(F.a,{item:!0},h("Total",c.a.createElement(Se,{value:d}),c.a.createElement(Se,{value:p}),c.a.createElement(Se,{value:d+p}))),c.a.createElement(F.a,{item:!0},a?c.a.createElement(N,null):c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(_n.a,null),"Add Meeting"))))))},gn=function(e){(0,e.setTitle)("Add Meeting");var t=Object(l.g)().push,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),m=s[0],d=s[1];return Object(r.useEffect)((function(){var e=!0;return i(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return new Promise((function(t,n){I().then((function(a){ut().then((function(n){t({date:e,settings:a,boxes:n.map((function(e){return{cash:0,cheques:0,box:e}}))})}),n)}),n)}))}().then((function(t){e&&(d(t),i(!1))}),(function(){e&&i(!1)})),function(){e=!1}}),[]),o&&!m?c.a.createElement(N,null):m?c.a.createElement(vn,{meeting:m,onSubmit:function(e){i(!0),bn(e).then((function(){i(!1),t(dn(v(e.date)))}),(function(){return i(!1)}))},working:o}):null},On=Object(j.number)().integer().min(0).required();function jn(e,t,n){return n?t>0?e+n:e-n:e}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return new Promise((function(t,n){Qe(p()(e,h).startOf("month").format(h),e).then((function(n){var a=n.transactions.reduce((function(e,t){return jn(e,t.receipts_amt,t.cash)}),0),r=n.transactions.reduce((function(e,t){return jn(e,t.receipts_amt,t.cheques)}),0);t({date:e,apply_on_date:e,cash:a,cheques:r})}),n)}))}function Cn(e){return new Promise((function(t,n){Object(j.object)().shape({date:Pe.required(),apply_on_date:Pe.required().when(["date"],(function(e,t){return t.test("apply_on_date_gt_date","Applied date should be the same as or later than date",(function(t){return t>=e}))})),cash:On,cheques:On}).test("transaction-month-year-match","Deposit Total should not be 0",(function(e){return e.cash>0||e.cheques>0})).validate(e).then((function(){var a=e.date,r=e.cash,c=e.cheques,o=r+c;Ve({date:a,apply_on_date:a,description:"Deposit",code:ke.D,cash:r,cheques:c,receipts_amt:-o,primary_amt:o,other_amt:0}).then((function(){return t(e)}),n)}),(function(e){Ge(e),n(e)}))}))}var xn=function(e){var t=e.deposit,n=e.onSubmit,a=e.working,o=Object(r.useState)(t),i=Object(f.a)(o,2),u=i[0],l=i[1],s=u.cash,d=u.cheques,p=s+d;return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u)}},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Qt,{required:!0,value:u.date,onChange:function(e){l(Object(Be.a)({},u,{date:e})),yn(e).then((function(e){l(e)}))},label:"Date"})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Qt,{required:!0,value:u.apply_on_date,onChange:function(e){l(Object(Be.a)({},u,{apply_on_date:e}))},label:"Applicable Date"})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Gt,{label:"Cash",required:!0,value:s,onChange:function(e){return l(Object(Be.a)({},u,{cash:e}))}})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Gt,{label:"Cheques",required:!0,value:d,onChange:function(e){return l(Object(Be.a)({},u,{cheques:e}))}})),c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(m.a,{p:2},c.a.createElement(F.a,{container:!0,justify:"flex-end",spacing:1},c.a.createElement(F.a,{item:!0},"Total:"),c.a.createElement(F.a,{item:!0},c.a.createElement(Se,{value:p}))))),c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(m.a,{p:2,pl:0,pr:0},c.a.createElement(F.a,{container:!0,justify:"flex-end",spacing:1},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},a?c.a.createElement(N,null):c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(_n.a,null),"Add Deposit")))))))},wn=function(e){(0,e.setTitle)("Add Deposit");var t=Object(l.g)().push,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),m=s[0],d=s[1];return Object(r.useEffect)((function(){var e=!0;return i(!0),yn().then((function(t){e&&(d(t),i(!1))}),(function(){e&&i(!1)})),function(){e=!1}}),[]),o&&!m?c.a.createElement(N,null):m?c.a.createElement(xn,{deposit:m,onSubmit:function(e){i(!0),Cn(e).then((function(){i(!1),t(dn(v(e.date)))}),(function(){return i(!1)}))},working:o}):null};function Sn(){return O.table("transaction_breakdowns")}function kn(){return Sn().toArray()}function Tn(e){return new Promise((function(t,n){Promise.all(e.map((function(e){return Re().validate(e)}))).then((function(){kn().then((function(a){Sn().bulkDelete(a.map((function(e){return e.id}))).then((function(){Sn().bulkAdd(e).then(t,n)}),n)}),n)}),n)}))}function Wn(e,t){return e?[xe(e.reduce((function(e,n){return e+(n.code===t&&n.amt?n.amt:0)}),0))]:[""]}function An(e){var t,n,a;return st.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.breakdown,r.next=3,st.a.awrap(I());case 3:return n=r.sent,a=t?t.reduce((function(e,t){return e+(t.amt||0)}),0):0,r.next=7,st.a.awrap(pt("/pdf/TO-62-E.pdf",{"900_1_CheckBox":[!0],"900_5_CheckBox":[!!e.confirmation_code],"900_4_Text":[n.congregation_name],"901_1_TO62Donate":Wn(t,Ie.WW_BOX),"901_2_TO62Donate":Wn(t,Ie.WW_RESOLUTION),"901_3_TO62Donate":Wn(t,Ie.KHAHC),"901_4_TO62Donate":Wn(t,Ie.GAA),"901_5_TO62Donate":Wn(t,Ie.COAA),"901_8_TO62Donate":Wn(t,void 0),"900_8_Text":[t?(c=t.filter((function(e){return!e.code})).map((function(e){return e.description})).join(" / "),o=55,c.length<=o?c:c.substring(o)+"..."):""],"900_9_Text":[e.confirmation_code||""],"901_9_TO62TotalDonate":[xe(a)],"901_11_TO62TotalFunds":[xe(a)],"900_10_Text":[D(n)],"900_11_Text_C":[e.confirmation_code||""],"900_13_Text_C":[n.accounts_servant_or_overseer],"900_14_Text_C":[n.authorized_signer]}));case 7:case"end":return r.stop()}var c,o}))}function qn(e){return new Promise((function(t,n){Object(j.object)().shape({date:Pe.required(),apply_on_date:Pe.required().when(["date"],(function(e,t){return t.test("apply_on_date_gt_date","Applied date should be the same as or later than date",(function(t){return!t||t>=e}))})),confirmation_code:Object(j.string)().required(),breakdown:Object(j.array)().min(1).of(Object(j.object)().shape({description:Object(j.string)().required(),amt:Object(j.number)().integer().min(0,"All Amounts must be 0 or Greater").required()})).required()}).validate(e).then((function(){var n=e.date,a=e.apply_on_date,r=e.breakdown,c=e.confirmation_code,o="To Branch - ".concat(c," (").concat(a,")"),i=r.reduce((function(e,t){return t.amt+e}),0);t({date:n,apply_on_date:a,description:o,code:ke.CBT,receipts_amt:0,primary_amt:-i,other_amt:0,breakdown:r,confirmation_code:c})}),(function(e){Ge(e),n(e)}))}))}O.version(1).stores({transaction_breakdowns:"++id"}),O.on("populate",(function(){[Ie.WW_RESOLUTION,Ie.KHAHC,Ie.GAA,Ie.COAA].forEach((function(e){O.transaction_breakdowns.add({code:e,description:Me(e),amt:0})}))}));var Bn=function(e){var t=e.transfer,n=e.onSubmit,a=e.working,o=Object(r.useState)(t),i=Object(f.a)(o,2),u=i[0],l=i[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u)}},c.a.createElement(F.a,{container:!0,spacing:1,justify:"space-between",alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:12,sm:!0},c.a.createElement(Qt,{required:!0,value:u.date,onChange:function(e){return l(Object(Be.a)({},u,{date:e}))},label:"Date"})),c.a.createElement(F.a,{item:!0,xs:12,sm:!0},c.a.createElement(Qt,{required:!0,value:u.apply_on_date,onChange:function(e){return l(Object(Be.a)({},u,{apply_on_date:e}))},label:"Apply on Date"})),c.a.createElement(F.a,{item:!0,xs:12,md:!0},c.a.createElement(Pt.a,{required:!0,fullWidth:!0,label:"Confirmation Code",variant:"outlined",value:u.confirmation_code,onChange:function(e){return l(Object(Be.a)({},u,{confirmation_code:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(Xt,{breakdowns:u.breakdown,onChange:function(e){return l(Object(Be.a)({},u,{breakdown:e}))}})),c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(m.a,{p:2,pl:0,pr:0},c.a.createElement(F.a,{container:!0,justify:"flex-end",spacing:1},c.a.createElement(F.a,{item:!0,xs:12,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return function(e){var t,n;return st.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object(Be.a)({},e,{confirmation_code:e.confirmation_code||" "}),a.next=3,st.a.awrap(qn(e));case 3:return t=a.sent,n=An(t),a.abrupt("return",n);case 6:case"end":return a.stop()}}))}(u)}},"Generate TO-62")),c.a.createElement(F.a,{item:!0,xs:12,sm:"auto"},a?c.a.createElement(N,null):c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(_n.a,null),"Add Transfer")))))))},In=function(e){(0,e.setTitle)("Add Transfer To Branch");var t=Object(l.g)().push,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),s=Object(f.a)(u,2),m=s[0],d=s[1];return Object(r.useEffect)((function(){var e=!0;return i(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return new Promise((function(t,n){var a=p()(e,h).startOf("month"),r=a.format(h),c=a.clone().add(-1,"days").format(h),o=a.add(-1,"month").format(h);Promise.all([ze({date_min:o,date_max:r}),kn()]).then((function(n){var a=Object(f.a)(n,2),r=a[0],o=a[1],i=r.reduce((function(e,t){var n=!1===Ae(t.code)?t.receipts_amt:0;return t.code===ke.CBT&&t.breakdown&&(n+=t.breakdown.reduce((function(e,t){return e-(t.amt&&t.code===Ie.WW_BOX?t.amt:0)}),0)),e+n}),0),u=(new Date).getTime(),l=o.map((function(e,t){return Object(Be.a)({},e,{id:u+t})}));l.splice(0,0,{id:u-1,description:"WW (from box)",code:Ie.WW_BOX,amt:i}),t({date:c,apply_on_date:e,confirmation_code:"",breakdown:l})}),n)}))}().then((function(t){e&&(d(t),i(!1))}),(function(){e&&i(!1)})),function(){e=!1}}),[]),o&&!m?c.a.createElement(N,null):m?c.a.createElement(Bn,{transfer:m,onSubmit:function(e){i(!0),function(e){return new Promise((function(t,n){qn(e).then((function(a){Ve(a).then((function(){return t(e)}),n)}),n)}))}(e).then((function(){i(!1),t(dn(e.date))}),(function(){return i(!1)}))},working:o}):null},Dn=function(e){(0,e.setTitle)("Add Transaction");var t=Object(l.g)().push,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1];return c.a.createElement(Zt,{transaction:Je(""),onSubmit:function(e){return i(!0),new Promise((function(n,a){Ve(e).then((function(){n(),t(dn(v(e.date)))}),(function(e){i(!1),a(e)}))}))}},o?c.a.createElement(N,null):c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(_n.a,null),"Add Transaction"))},Mn=n(179),Rn=n.n(Mn),Pn=function(e){var t=e.onPrev,n=e.onNext,a=e.children,r=Object(ne.a)(),o=Object(te.a)(r.breakpoints.up("sm"));return c.a.createElement(F.a,{container:!0,justify:"space-between",alignItems:"center",spacing:1},c.a.createElement(F.a,{item:!0},c.a.createElement(se.a,{variant:"contained",onClick:t},c.a.createElement(It.a,null),o&&"Previous")),c.a.createElement(F.a,{item:!0,xs:!0},c.a.createElement(m.a,{textAlign:"center"},a)),c.a.createElement(F.a,{item:!0},c.a.createElement(se.a,{variant:"contained",onClick:n},o&&"Next",c.a.createElement(Rn.a,null))))},Un="/months/:year";function Fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p()().year();return Un.replace(":year",e.toString())}var Hn=function(e){(0,e.setTitle)("Select Month");var t=Object(l.g)().push,n=P(),a=parseInt(Object(l.i)().year)||p()().year();function r(e){t(Fn(e))}function o(e){var r=p()().year(a).month(e),o=r.format(b);return c.a.createElement(F.a,{item:!0,key:o},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return function(e){t(dn(e))}(o)}},r.format(n.formatting.month_format)))}return c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},c.a.createElement(F.a,{item:!0},c.a.createElement(Pn,{onPrev:function(){return r(a-1)},onNext:function(){return r(a+1)}},c.a.createElement(m.a,{textAlign:"center"},a))),function(){for(var e=[],t=0;t<12;t++)e.push(o(t));return e}())},Nn=function(e){var t=e.name,n=e.label,a=e.value,o=e.onChange,i=e.error,u=e.helperText,l=e.required;l&&void 0===i&&(i=null==a);var s=Object(r.useState)(null==a?"":a.toString()),m=Object(f.a)(s,2),d=m[0],p=m[1],h=Object(r.useState)(a),b=Object(f.a)(h,2),E=b[0],_=b[1];function v(){var e=d.length?parseInt(d):l?0:void 0;p(null==e?"":e.toString()),o(e)}return a!==E&&(p(null==a?"":a.toString()),_(a)),c.a.createElement(Pt.a,{name:t,label:n,fullWidth:!0,type:"number",variant:"outlined",value:d,error:i,helperText:u,required:l,onChange:function(e){return p(e.target.value)},onFocus:function(e){return e.target.select()},onBlur:function(){return v()},onKeyDown:function(e){"Enter"===e.key&&v()}})},Yn=function(e){var t=e.settings,n=e.onChange,a=e.onSubmit;function o(e,a){return c.a.createElement(F.a,{item:!0,xs:6,sm:4,md:3},c.a.createElement(Ut.a,{control:c.a.createElement(Ft.a,{checked:t.meeting_days[e],color:"primary",onChange:function(){var a=Object(Be.a)({},t.meeting_days);a[e]=!a[e],n(Object(Be.a)({},t,{meeting_days:a}))}}),label:a}))}return c.a.createElement("form",{onSubmit:function(e){a&&(e.preventDefault(),a(t))}},c.a.createElement(r.Fragment,null,c.a.createElement($.a,{variant:"h6"},"General Information"),c.a.createElement(de.a,null),c.a.createElement(m.a,{pt:2,pb:2},c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Congregation Name",value:t.congregation_name,onChange:function(e){return n(Object(Be.a)({},t,{congregation_name:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"City",value:t.city,onChange:function(e){return n(Object(Be.a)({},t,{city:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Province or State",value:t.province_or_state,onChange:function(e){return n(Object(Be.a)({},t,{province_or_state:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Accounts Servant or Overseer",value:t.accounts_servant_or_overseer,onChange:function(e){return n(Object(Be.a)({},t,{accounts_servant_or_overseer:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Authorized Signer",value:t.authorized_signer,onChange:function(e){return n(Object(Be.a)({},t,{authorized_signer:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6,md:4},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Other Account Description",value:t.other_account_description,onChange:function(e){return n(Object(Be.a)({},t,{other_account_description:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Nn,{required:!0,label:"Min Num Interest",value:t.min_num_interest,onChange:function(e){return n(Object(Be.a)({},t,{min_num_interest:e}))}})),c.a.createElement(F.a,{item:!0,xs:6},c.a.createElement(Nn,{required:!0,label:"Min Num Expenditures",value:t.min_num_expenditure,onChange:function(e){return n(Object(Be.a)({},t,{min_num_expenditure:e}))}}))))),c.a.createElement(m.a,{p:1},c.a.createElement($.a,{variant:"h6"},"Formatting"),c.a.createElement(de.a,null),c.a.createElement(m.a,{pt:2,pb:2},c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center"},c.a.createElement(F.a,{item:!0,xs:12,sm:6},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Month Format (e.g.: ".concat(p()().format(t.formatting.date_format),")"),value:t.formatting.date_format,onChange:function(e){return n(Object(Be.a)({},t,{formatting:Object(Be.a)({},t.formatting,{date_format:e.target.value})}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:6},c.a.createElement(Pt.a,{fullWidth:!0,variant:"outlined",label:"Month Format (e.g.: ".concat(p()().format(t.formatting.month_format),")"),value:t.formatting.month_format,onChange:function(e){return n(Object(Be.a)({},t,{formatting:Object(Be.a)({},t.formatting,{month_format:e.target.value})}))}}))))),c.a.createElement(m.a,{p:1},c.a.createElement($.a,{variant:"h6"},"Meeting Days"),c.a.createElement(de.a,null),c.a.createElement(m.a,{pt:2,pb:2},c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center"},o("sun","Sunday"),o("mon","Monday"),o("tue","Tuesday"),o("wed","Wednesday"),o("thu","Thursday"),o("fri","Friday"),o("sat","Saturday")))),c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",type:"submit",color:"primary"},c.a.createElement(Wt.a,null),"Save Changes")))))},Ln=function(e){(0,e.setTitle)("General Settings");var t=Object(r.useState)(P()),n=Object(f.a)(t,2),a=n[0],o=n[1];return c.a.createElement(Yn,{settings:a,onChange:o,onSubmit:function(){var e;(e=a,new Promise((function(t,n){x(e).then((function(){T("Settings Updated"),t(e)}),n)}))).then((function(){return U(a)}))}})},Gn=function(e){var t=e.box,n=e.onChange,a=e.onSubmit,r=e.children;return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(t)}},c.a.createElement(m.a,{p:1,pt:2},c.a.createElement(F.a,{container:!0,spacing:1,alignItems:"center",justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:2,sm:2},c.a.createElement(Lt,{label:"Code",value:t.code,keyFn:function(e){return e},titleFn:function(e){return e},descriptionFn:function(e){return c.a.createElement(F.a,{container:!0,spacing:2},c.a.createElement(F.a,{item:!0,xs:2},c.a.createElement($.a,{variant:"h6"},e)),c.a.createElement(F.a,{item:!0,xs:!0},Te(e)))},options:Object.keys(ke),onChange:function(e){var a=We(e);n(Object(Be.a)({},t,{code:e,title:a}))}})),c.a.createElement(F.a,{item:!0,xs:10},c.a.createElement(Pt.a,{required:!0,fullWidth:!0,label:"Title",variant:"outlined",value:t.title,onChange:function(e){return n(Object(Be.a)({},t,{title:e.target.value}))}})),c.a.createElement(F.a,{item:!0,xs:12,sm:"auto"},c.a.createElement(m.a,{pt:1},r)))))},Vn="/contribution-box/:boxId";var Kn=function(e){(0,e.setTitle)("Update Contribution Box");var t=Object(l.g)().push,n=parseInt(Object(l.i)().boxId),a=Object(r.useState)(!1),o=Object(f.a)(a,2),i=o[0],u=o[1],s=Object(r.useState)(void 0),d=Object(f.a)(s,2),p=d[0],h=d[1];return Object(r.useEffect)((function(){var e=!0;return u(!0),ct(n).then((function(t){e&&(h(t),u(!1))}),(function(){e&&u(!1)})),function(){e=!1}}),[n]),i?c.a.createElement(N,null):p?c.a.createElement(r.Fragment,null,c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return t(zn)}},c.a.createElement(It.a,null),"Back to Contribution Boxes")))),c.a.createElement(Gn,{box:p,onChange:h,onSubmit:function(e){u(!0),ot(e).then((function(){u(!1),t(zn)}),(function(){return u(!1)}))}},c.a.createElement(F.a,{container:!0,spacing:1},c.a.createElement(F.a,{item:!0,xs:12,sm:"auto"},c.a.createElement(Rt,{fullWidth:!0,type:"button",variant:"contained",onClick:function(){return function(e){u(!0),ot(e).then((function(){it(e.id),t(zn)}),(function(){return u(!1)}))}(p)}},c.a.createElement(qt.a,null),"Delete Contribution Box")),c.a.createElement(F.a,{item:!0,xs:12,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(Wt.a,null),"Update Contribution Box"))))):c.a.createElement(Dt,{msg:"No Contribution Box Found"})},Xn=function(e){(0,e.setTitle)("Create Contribution Box");var t=Object(l.g)().push,n=Object(r.useState)(!1),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(at),s=Object(f.a)(u,2),d=s[0],p=s[1];return o?c.a.createElement(N,null):c.a.createElement(r.Fragment,null,c.a.createElement(m.a,{p:1},c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return t(zn)}},c.a.createElement(It.a,null),"Back to Contribution Boxes")))),c.a.createElement(Gn,{box:d,onChange:p,onSubmit:function(e){i(!0),rt(e).then((function(){i(!1),t(zn)}),(function(){i(!1)}))}},c.a.createElement(se.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary"},c.a.createElement(_n.a,null),"Create Contribution Box")))},zn="/contribution-boxes",Jn=function(e){(0,e.setTitle)("Contribution Boxes");var t=Object(r.useState)(!1),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(void 0),u=Object(f.a)(i,2),s=u[0],d=u[1],p=Object(l.g)().push;return Object(r.useEffect)((function(){var e=!0;return o(!0),ut().then((function(t){e&&(d(t),o(!1))}),(function(){e&&o(!1)})),function(){e=!1}}),[]),a?c.a.createElement(N,null):s?c.a.createElement(r.Fragment,null,c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},s.map((function(e){return c.a.createElement(F.a,{key:e.id,item:!0,xs:!0},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return p((t=e.id,Vn.replace(":boxId",t.toString())));var t}},e.title))}))),c.a.createElement(m.a,{pt:2},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return p("/create-contribution-box")}},"Create Contribution Box"))):c.a.createElement(Dt,{msg:"Error retrieving Boxes"})},$n=function(e){(0,e.setTitle)("Default Transfer Breakdown");var t=Object(r.useState)(!1),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(void 0),u=Object(f.a)(i,2),l=u[0],s=u[1];function m(e){l&&(e.preventDefault(),Tn(l).then((function(){T("Default Transfer Breakdown Updated")}),(function(e){Ge(e)})))}return Object(r.useEffect)((function(){var e=!0;return o(!0),kn().then((function(t){e&&(s(t),o(!1))}),(function(){e&&o(!1)})),function(){e=!1}}),[]),a?c.a.createElement(N,null):l?c.a.createElement("form",{onSubmit:m},c.a.createElement(Xt,{breakdowns:l,onChange:s,amtRequired:!0}),c.a.createElement(F.a,{container:!0,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:!0,sm:"auto"},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",type:"submit",color:"primary"},c.a.createElement(Wt.a,null),"Save Changes")))):null},Qn="/nav",Zn=function(e){var t=e.onClick;(0,e.setTitle)("Accounts Servant Helper");var n=Object(l.g)().push;function a(e){n(e),t&&t()}function r(e,t,n){return c.a.createElement(F.a,{item:!0,xs:!0},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){return a(t)}},n,e))}return c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},r("Add Meeting","/create-meeting"),r("Add Deposit","/create-deposit"),r("Add Transfer To Branch","/create-transfer"),r("Add Transaction","/create-transaction"),r("Current Month",dn()),r("Select Month",Fn()),c.a.createElement(F.a,{item:!0},c.a.createElement(m.a,{p:1},c.a.createElement($.a,{variant:"h6"},"Settings"),c.a.createElement(F.a,{container:!0,direction:"column",spacing:1},r("General Settings","/settings"),r("Contribution Boxes",zn),r("Default Transfer Breakdown","/default-breakdown"),r("Backups","/backups")))))},ea=function(e){var t=e.children,n=Object(r.useState)("Accounts Servant Helper"),a=Object(f.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(!1),s=Object(f.a)(u,2),m=s[0],d=s[1],p=Object(l.g)().push,h=Object(ne.a)(),b=Object(te.a)(h.breakpoints.up("sm")),E=P();function _(){b?d(!0):p(Qn)}return c.a.createElement(r.Fragment,null,c.a.createElement(X.a,{position:"static"},c.a.createElement(z.a,null,c.a.createElement(J.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:_},c.a.createElement(ee.a,null)),c.a.createElement($.a,{variant:"h6",onClick:_,style:{flexGrow:1}},o),c.a.createElement(le,null,(function(e,t){return c.a.createElement(ge,{msgs:e,onClearMsgs:t,dateFormat:E.formatting.date_format})}))),c.a.createElement(Q.a,{open:m,onClose:function(){return d(!1)}},c.a.createElement(Zn,{onClick:function(){return d(!1)},setTitle:i}))),t(i))},ta=function(e){function t(e){var n;return Object(ae.a)(this,t),(n=Object(ce.a)(this,Object(oe.a)(t).call(this,e))).state={msg:null,timeoutId:void 0},n.setMsgs=n.setMsgs.bind(Object(ie.a)(n)),n.clearMsg=n.clearMsg.bind(Object(ie.a)(n)),n}return Object(ue.a)(t,e),Object(re.a)(t,[{key:"setMsgs",value:function(e){var t=e[e.length-1];t&&(window.clearInterval(this.state.timeoutId),this.setState({msg:t,timeoutId:window.setTimeout(this.clearMsg,this.props.msgTimeout)}))}},{key:"clearMsg",value:function(){window.clearInterval(this.state.timeoutId),this.setState({msg:null,timeoutId:void 0})}},{key:"componentDidMount",value:function(){A(this.setMsgs)}},{key:"componentWillUnmount",value:function(){q(this.setMsgs),window.clearInterval(this.state.timeoutId)}},{key:"render",value:function(){return this.props.children(this.state.msg)}}]),t}(r.Component);ta.defaultProps={msgTimeout:3e3};var na=function(e){var t=e.msg,n=Object(ne.a)();return c.a.createElement(X.a,null,c.a.createElement(Ht.a,{in:!!t},c.a.createElement(z.a,{color:"primary",style:t&&t.type!==w.Info?{background:n.palette.error.main,color:n.palette.error.contrastText}:{}},t?c.a.createElement(r.Fragment,null,c.a.createElement(_e,{msg:t,color:"inherit"}),c.a.createElement(m.a,{pl:1},c.a.createElement($.a,{color:"inherit",style:{flexGrow:1}},t.msg))):null)))};n(341);var aa=n(181),ra="file",ca="Save to File";function oa(e,t){return new Promise((function(n){var a=JSON.stringify(e),r=(new aa.TextEncoder).encode(a),c=new Blob([r],{type:"application/json"}),o=URL.createObjectURL(c),i=document.createElement("a");i.download="ash-state-"+p()().format("YYYYMMDD-HHMMSS"),i.href=o,i.style.display="none",document.body.appendChild(i),i.click(),i.remove(),n(Object(Be.a)({},t,{backed_up_at:(new Date).getTime()})),window.setTimeout((function(){return URL.revokeObjectURL(o)}),5e3)}))}function ia(){return O.table("backup_settings")}function ua(e){return new Promise((function(t,n){Object(j.object)().validate(e).then((function(){ia().put(e,1).then(t,n)}),n)}))}function la(){return new Promise((function(e,t){ia().get(1).then((function(t){e(t||{dao_code:ra,settings:null})}),t)}))}function sa(e){return ua(e)}function ma(){return new Promise((function(e,t){Promise.all([new Promise((function(e,t){Promise.all([I(),Ye(),nt(),kn()]).then((function(t){var n=Object(f.a)(t,4),a=n[0],r=n[1],c=n[2],o=n[3];e({timestamp:(new Date).getTime(),settings:a,transactions:r,boxes:c,default_transaction_breakdowns:o})}),t)})),la()]).then((function(n){var r=Object(f.a)(n,2);(function(e,t){return function(e){var t=[a].find((function(t){return t.code===e.dao_code}));if(!t)throw new Error("Unknown DAO: "+e.dao_code);return t}(t).save(e,t)})(r[0],r[1]).then((function(n){sa(n).then((function(){return e(n)}),t)}),t)}),t)}))}function fa(e){return new Promise((function(t,n){Object(j.object)().shape({timestamp:Object(j.number)().positive().required(),settings:y().required(),transactions:Object(j.array)().of(Ue().required()),boxes:Object(j.array)().of(et().required()),default_transaction_breakdowns:Object(j.array)().of(Re().required())}).validate(e).then((function(){new Promise((function(e,t){Ye().then((function(n){Promise.all(n.map((function(e){return Ne(e.id)}))).then(e,t)}))})).then((function(){var a,r=[];r.push.apply(r,e.transactions.map((function(e){return He(e)}))),r.push(x(e.settings)),r.push((a=e.boxes,new Promise((function(e,t){Promise.all(a.map((function(e){return et().validate(e)}))).then((function(){nt().then((function(n){tt().bulkDelete(n.map((function(e){return e.id}))).then((function(){tt().bulkAdd(a).then(e,t)}),t)}),t)}),t)})))),r.push(Tn(e.default_transaction_breakdowns)),Promise.all(r).then((function(){la().then((function(e){sa(e=Object(Be.a)({},e,{backed_up_at:(new Date).getTime()})).then((function(){T("Local State Restored from Backup"),t(e)}),n)}),n)}),n)}),n)}),n)}))}O.version(1).stores({backup_settings:""});var da=function(e){(0,e.setTitle)("Backups");var t=Object(r.useState)(!1),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(void 0),u=Object(f.a)(i,2),l=u[0],s=u[1],m=P();return Object(r.useEffect)((function(){var e=!0;return o(!0),la().then((function(t){e&&(s(t),o(!1))}),(function(e){Ge(e),o(!1)})),function(){e=!1}}),[]),a?c.a.createElement(N,null):l?c.a.createElement(F.a,{container:!0,spacing:1,justify:"flex-end"},c.a.createElement(F.a,{item:!0,xs:12},c.a.createElement(Pt.a,{fullWidth:!0,disabled:!0,variant:"outlined",label:"Most Recent Back Up",value:function(){var e=l&&l.backed_up_at;return e?p()(new Date(e)).format("".concat(m.formatting.date_format," HH:mm:ss")):"Never"}()})),c.a.createElement(F.a,{item:!0,xs:12,md:4},c.a.createElement(se.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){o(!0),ma().then((function(e){T("Backup Created"),s(e),o(!1)}),(function(e){Ge(e),o(!1)}))}},"Save Backup")),c.a.createElement(F.a,{item:!0,xs:12,md:4},c.a.createElement("input",{id:"backup_file",type:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(){var e=n.result;fa(JSON.parse(e)).then((function(e){s(e),I().then(U)}))},n.readAsText(t)},accept:".json,application/json"}),c.a.createElement(se.a,{fullWidth:!0,variant:"contained",onClick:function(){document.querySelector("#backup_file").click()}},"Restore from Backup"))):null},pa=function(){return c.a.createElement(Y,null,(function(e){return c.a.createElement(K,null,c.a.createElement(u.a,null,c.a.createElement(ea,null,(function(e){return c.a.createElement(s.a,null,c.a.createElement(m.a,{pt:2,pb:2},c.a.createElement(l.d,null,c.a.createElement(l.b,{path:Qn,component:function(){return c.a.createElement(Zn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/create-meeting",component:function(){return c.a.createElement(gn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/create-deposit",component:function(){return c.a.createElement(wn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/create-transfer",component:function(){return c.a.createElement(In,{setTitle:e})}}),c.a.createElement(l.b,{path:"/create-transaction",component:function(){return c.a.createElement(Dn,{setTitle:e})}}),c.a.createElement(l.b,{path:en,component:function(){return c.a.createElement(nn,{setTitle:e})}}),c.a.createElement(l.b,{path:fn,component:function(){return c.a.createElement(pn,{setTitle:e})}}),c.a.createElement(l.b,{path:cn,component:function(){return c.a.createElement(on,{setTitle:e})}}),c.a.createElement(l.b,{path:un,component:function(){return c.a.createElement(sn,{setTitle:e})}}),c.a.createElement(l.b,{path:Un,component:function(){return c.a.createElement(Hn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/settings",component:function(){return c.a.createElement(Ln,{setTitle:e})}}),c.a.createElement(l.b,{path:zn,component:function(){return c.a.createElement(Jn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/create-contribution-box",component:function(){return c.a.createElement(Xn,{setTitle:e})}}),c.a.createElement(l.b,{path:Vn,component:function(){return c.a.createElement(Kn,{setTitle:e})}}),c.a.createElement(l.b,{path:"/default-breakdown",component:function(){return c.a.createElement($n,{setTitle:e})}}),c.a.createElement(l.b,{path:"/backups",component:function(){return c.a.createElement(da,{setTitle:e})}}),c.a.createElement(l.a,{from:"/",exact:!0,to:Qn}))))})),c.a.createElement(ta,null,(function(e){return c.a.createElement(na,{msg:e})}))))}))},ha=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ba(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(c.a.createElement(pa,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("https://tofarr.github.io/ash",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://tofarr.github.io/ash","/service-worker.js");ha?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ba(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ba(t,e)}))}}()}},[[200,1,2]]]);
//# sourceMappingURL=main.20a34efb.chunk.js.map